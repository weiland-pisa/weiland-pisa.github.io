<html>
 <head>
  <title>GitHub: weiland-pisa</title>
	<script>
		function copyToClipboard(id) { 
		var r = document.createRange(); 
		var e = document.getElementById(id); 
		r.selectNode(e); 
		window.getSelection().removeAllRanges(); 
		window.getSelection().addRange(r); 
		document.execCommand('copy'); 
		window.getSelection().removeAllRanges(); 
		alert('Copied "'+e.innerText+'" to the clipboard'); 
		}

		function readJson() {
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function() {
			  if (this.readyState == 4 && this.status == 200) {
				var json = JSON.parse(this.responseText);
				var dummy = document.getElementById("dummy");
				for (var idx=json.length-1; idx>=0; idx--){
					var tr = document.createElement('tr');
					dummy.parentNode.insertBefore(tr, dummy.nextSibling);
					var td = document.createElement('td');
					td.setAttribute('style', 'border: 0px');
					
					var span = document.createElement('span');
					span.setAttribute('class', 'material-icons');
					if (json[idx].private) {
						span.innerHTML = 'language';
						span.setAttribute('style', 'color: #F44336');
					} else {
						span.innerHTML = 'lock';
						span.setAttribute('style', 'color: #4CAF50');
					}
					td.appendChild(span);
					tr.appendChild(td);
					td = document.createElement('td');
					var a = document.createElement('a');
					a.setAttribute('href', json[idx].html_url);
					a.setAttribute('target', '_blank');
					a.innerHTML = json[idx].name;
					td.appendChild(a);
					tr.appendChild(td);
					td = document.createElement('td');
					var id = 'git-'+json[idx].name;
					var button = document.createElement('button');
					button.setAttribute('onclick', "copyToClipboard('"+id+"')");
					button.setAttribute('id', id);
					button.innerHTML = json[idx].clone_url;
					td.appendChild(button);
					tr.appendChild(td);
					td = document.createElement('td');
					if (json[idx].description) {
						td.innerHTML = json[idx].description;
					} else {
						td.innerHTML = '&nbsp;';
					}
					tr.appendChild(td);
				}
				dummy.remove();
			  }
			};
			xmlhttp.open("GET", "GitHub.json", true);
			xmlhttp.send();
		}

		window.onload = readJson;

	</script>
  <style>
	table { border-collapse: collapse; } 
	td { border: 1px solid; padding: 5px; color: lightgray;} 
	button {color: black; background-color: #AAAAAA;} 
	a {color: lightgray;}
	</style>
		<link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
 </head>
 <body>
  <h1><a href="https://www.github.com/weiland-pisa" target="_blank">weiland-pisa</a></h1>
  <table>
   <tr>
    <th style="text-align:left"></th>
    <th style="text-align:left">Name</th>
    <th style="text-align:left">Clone URL</th>
    <th style="text-align:left">Description</th>
   </tr>
   <tr id="dummy"></tr>
  </table>
 </body>
</html>